for(var e=document.getElementsByTagName("iframe"),x=e.length;x--;)/youtube.com\/embed/.test(e[x].src)&&-1===e[x].src.indexOf("enablejsapi\x3d")&&(e[x].src+=(-1===e[x].src.indexOf("?")?"?":"\x26")+"enablejsapi\x3d1");var gtmYTListeners=[];
function onYouTubeIframeAPIReady(){for(var a=document.getElementsByTagName("iframe"),b=a.length;b--;)/youtube.com\/embed/.test(a[b].src)&&(gtmYTListeners.push(new YT.Player(a[b],{events:{onStateChange:onPlayerStateChange,onError:onPlayerError}})),YT.gtmLastAction="p")}
function onPlayerStateChange(a){a.data==YT.PlayerState.PLAYING&&setTimeout(onPlayerPercent,1E3,a.target);var b=a.target.getVideoData(),b=b.video_id+": "+b.title;a.data==YT.PlayerState.PLAYING&&"p"==YT.gtmLastAction&&(dataLayer.push({event:"youtube",action:"play",label:b}),_kmq.push(["record","Youtube_Watch"]),YT.gtmLastAction="");a.data==YT.PlayerState.PAUSED&&(dataLayer.push({event:"youtube",action:"pause",label:b}),YT.gtmLastAction="p")}
function onPlayerError(a){dataLayer.push({event:"error",action:"GTM",label:"youtube:"+a.target.src+"-"+a.data})}function onPlayerPercent(a){if(a.getPlayerState()==YT.PlayerState.PLAYING){var b=1.5>=a.getDuration()-a.getCurrentTime()?1:(Math.floor(a.getCurrentTime()/a.getDuration()*4)/4).toFixed(2);if(!a.lastP||b>a.lastP){var c=a.getVideoData(),c=c.video_id+":"+c.title;a.lastP=b;dataLayer.push({event:"youtube",action:100*b+"%",label:c})}1!=a.lastP&&setTimeout(onPlayerPercent,1E3,a)}}
var j=document.createElement("script"),f=document.getElementsByTagName("script")[0];j.src="//www.youtube.com/iframe_api";j.async=!0;f.parentNode.insertBefore(j,f);